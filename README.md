# ğŸ–¨ï¸ è¿œç¨‹æ‰“å°æœåŠ¡

ä¸€ä¸ªåŸºäºWebçš„è¿œç¨‹æ‰“å°æ‰˜ç®¡æœåŠ¡ï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€é¢„è§ˆå’Œæ‰“å°ã€‚

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„)
- [å‰ç½®è¦æ±‚](#-å‰ç½®è¦æ±‚)
- [å®‰è£…éƒ¨ç½²](#-å®‰è£…éƒ¨ç½²)
- [ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•)
- [APIæ¥å£](#-apiæ¥å£)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸŒ **Webç•Œé¢**: ç°ä»£åŒ–çš„å“åº”å¼Webç•Œé¢
- ğŸ“ **å¤šæ ¼å¼æ”¯æŒ**: PDF, Word, Excel, PPT, å›¾ç‰‡, æ–‡æœ¬ç­‰
- ğŸ‘ï¸ **æ–‡ä»¶é¢„è§ˆ**: è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶é¢„è§ˆå›¾
- ğŸ–¨ï¸ **è¿œç¨‹æ‰“å°**: é€šè¿‡CUPSé›†æˆå®ç°è¿œç¨‹æ‰“å°
- ğŸ“‹ **ä»»åŠ¡ç®¡ç†**: æŸ¥çœ‹å’Œç®¡ç†æ‰“å°é˜Ÿåˆ—
- ğŸ”„ **çŠ¶æ€ç›‘æ§**: å®æ—¶æ˜¾ç¤ºæ‰“å°æœºçŠ¶æ€
- ğŸ³ **Dockeréƒ¨ç½²**: å®¹å™¨åŒ–éƒ¨ç½²ï¼Œå¼€ç®±å³ç”¨

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯ (HTML/CSS/JS)                      â”‚
â”‚                  http://your-server:5000                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Flask åç«¯ (Python 3.11)                         â”‚
â”‚                    :5000                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ–‡ä»¶ä¸Šä¼      â”‚  â”‚ é¢„è§ˆç”Ÿæˆ     â”‚  â”‚ æ‰“å°ä»»åŠ¡ç®¡ç†        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CUPS æ‰“å°æœåŠ¡                             â”‚
â”‚                     :631                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚         â”‚     HP_DeskJet_4900         â”‚                      â”‚
â”‚         â”‚     ç‰©ç†æ‰“å°æœº               â”‚                      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ å‰ç½®è¦æ±‚

### Debian æœåŠ¡å™¨è¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Debian 10 (Buster) æˆ–æ›´é«˜ç‰ˆæœ¬
- **å†…å­˜**: è‡³å°‘ 1GB RAM
- **å­˜å‚¨**: è‡³å°‘ 5GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: ä¸æ‰“å°æœºåœ¨åŒä¸€å±€åŸŸç½‘

### æ‰“å°æœºè¦æ±‚

- HP DeskJet 4900 ç³»åˆ—æ‰“å°æœº
- å·²é€šè¿‡CUPSé…ç½®å¹¶å¯ç”¨

### Dockerç¯å¢ƒï¼ˆæ¨èï¼‰

- Docker Engine 20.10+
- Docker Compose 2.0+

## ğŸš€ å®‰è£…éƒ¨ç½²

### æ–¹å¼ä¸€ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®
git clone <repository-url>
cd printer_server

# 2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹å¿…è¦çš„é…ç½®

# 3. æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
docker-compose up -d --build

# 4. æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f print-service

# 5. æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps
```

### æ–¹å¼äºŒï¼šåŸç”Ÿéƒ¨ç½²

```bash
# 1. å®‰è£…ç³»ç»Ÿä¾èµ–
sudo apt-get update
sudo apt-get install -y \
    python3-pip \
    python3-venv \
    cups \
    cups-client \
    cups-filters \
    hpijs-ppds \
    hplip \
    ghostscript \
    poppler-utils \
    libmagic1 \
    fonts-dejavu-core \
    fonts-liberation \
    libreoffice

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# 3. å®‰è£…Pythonä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®CUPS
sudo systemctl enable cups
sudo systemctl start cups

# 5. é…ç½®æ‰“å°æœºï¼ˆç¡®ä¿HP_DeskJet_4900å·²é…ç½®ï¼‰
# è®¿é—® http://localhost:631 æ·»åŠ æ‰“å°æœº

# 6. å¯åŠ¨æœåŠ¡
python run.py
```

### æ–¹å¼ä¸‰ï¼šä¸ä½¿ç”¨Dockerç›´æ¥è¿æ¥å®¿ä¸»æœºCUPS

å¦‚æœéœ€è¦åœ¨Dockerä¸­è¿æ¥å®¿ä¸»æœºçš„CUPSæœåŠ¡ï¼š

```bash
# æ–¹å¼Aï¼šä½¿ç”¨ç½‘ç»œè¿æ¥
docker run -d \
  --name remote-print \
  -p 5000:5000 \
  -e CUPS_SERVER=your-debian-ip \
  -e CUPS_PORT=631 \
  -v /path/to/uploads:/app/uploads \
  your-image-name

# æ–¹å¼Bï¼šä½¿ç”¨Dockerå·å…±äº«CUPS socket
docker run -d \
  --name remote-print \
  -p 5000:5000 \
  -v /run/cups/cups.sock:/run/cups/cups.sock \
  -e CUPS_SERVER=localhost \
  -e CUPS_PORT=631 \
  -v /path/to/uploads:/app/uploads \
  your-image-name
```

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### 1. è®¿é—®Webç•Œé¢

æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ï¼š`http://<debian-server-ip>:5000`

### 2. ä¸Šä¼ æ–‡ä»¶

- **æ‹–æ‹½ä¸Šä¼ **: å°†æ–‡ä»¶æ‹–åˆ°ä¸Šä¼ åŒºåŸŸ
- **ç‚¹å‡»ä¸Šä¼ **: ç‚¹å‡»ä¸Šä¼ åŒºåŸŸé€‰æ‹©æ–‡ä»¶
- **æ‰¹é‡ä¸Šä¼ **: æ”¯æŒä¸€æ¬¡é€‰æ‹©å¤šä¸ªæ–‡ä»¶

### 3. é€‰æ‹©æ‰“å°æœº

åœ¨æ‰“å°æœºè®¾ç½®åŒºåŸŸé€‰æ‹© `HP_DeskJet_4900`

### 4. é…ç½®æ‰“å°é€‰é¡¹

- **ä»½æ•°**: è®¾ç½®æ‰“å°ä»½æ•° (1-100)
- **é¡µç èŒƒå›´**: è®¾ç½®æ‰“å°ç‰¹å®šé¡µé¢ (å¦‚ `1-5,8,11-13`)

### 5. é¢„è§ˆå’Œæ‰“å°

- ç‚¹å‡»æ–‡ä»¶å¡ç‰‡ä¸Šçš„ **é¢„è§ˆ** æŒ‰é’®æŸ¥çœ‹æ–‡ä»¶
- ç‚¹å‡» **æ‰“å°** æŒ‰é’®æäº¤æ‰“å°ä»»åŠ¡

### 6. ç®¡ç†æ‰“å°é˜Ÿåˆ—

åœ¨åº•éƒ¨åŒºåŸŸæŸ¥çœ‹å½“å‰æ‰“å°ä»»åŠ¡çŠ¶æ€ï¼Œå¯å–æ¶ˆå¾…å¤„ç†çš„ä»»åŠ¡

## ğŸ”Œ APIæ¥å£

### å¥åº·æ£€æŸ¥

```bash
GET /api/health
```

å“åº”:
```json
{
  "status": "ok",
  "service": "Remote Print Service",
  "timestamp": "2024-01-01T12:00:00",
  "printer": "HP_DeskJet_4900"
}
```

### è·å–æ‰“å°æœºåˆ—è¡¨

```bash
GET /api/printers
```

### è·å–æ‰“å°æœºçŠ¶æ€

```bash
GET /api/printer/status?printer=HP_DeskJet_4900
```

### ä¸Šä¼ æ–‡ä»¶

```bash
POST /api/upload
Content-Type: multipart/form-data

Body: file=@document.pdf
```

### åˆ—å‡ºæ–‡ä»¶

```bash
GET /api/files
```

### åˆ é™¤æ–‡ä»¶

```bash
DELETE /api/files/filename.pdf
```

### æ‰“å°æ–‡ä»¶

```bash
POST /api/print
Content-Type: application/json

{
  "filename": "document.pdf",
  "printer": "HP_DeskJet_4900",
  "copies": 1,
  "page_range": "1-5"
}
```

### è·å–æ‰“å°ä»»åŠ¡

```bash
GET /api/jobs
```

### å–æ¶ˆæ‰“å°ä»»åŠ¡

```bash
POST /api/jobs/{job_id}/cancel
```

### è½¬æ¢æ–‡ä»¶ä¸ºPDF

```bash
POST /api/convert
Content-Type: application/json

{
  "filename": "document.docx"
}
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|--------|------|
| `SERVICE_HOST` | `0.0.0.0` | æœåŠ¡ç›‘å¬åœ°å€ |
| `SERVICE_PORT` | `5000` | æœåŠ¡ç«¯å£ |
| `CUPS_SERVER` | `localhost` | CUPSæœåŠ¡å™¨åœ°å€ |
| `CUPS_PORT` | `631` | CUPSç«¯å£ |
| `CUPS_PRINTER_NAME` | `HP_DeskJet_4900` | é»˜è®¤æ‰“å°æœºåç§° |
| `UPLOAD_FOLDER` | `/app/uploads` | ä¸Šä¼ æ–‡ä»¶ç›®å½• |
| `MAX_CONTENT_LENGTH` | `52428800` | æœ€å¤§ä¸Šä¼ å¤§å°(50MB) |
| `DEBUG_MODE` | `false` | è°ƒè¯•æ¨¡å¼ |
| `TZ` | `UTC` | æ—¶åŒºè®¾ç½® |

### CUPSæ‰“å°æœºé…ç½®

å¦‚æœéœ€è¦åœ¨å®¹å™¨ä¸­ä½¿ç”¨æœ¬åœ°æ‰“å°æœºï¼Œéœ€è¦å…ˆåœ¨Debianä¸Šé…ç½®CUPSï¼š

```bash
# 1. å®‰è£…CUPS
sudo apt install cups

# 2. å¯åŠ¨CUPSæœåŠ¡
sudo systemctl enable cups
sudo systemctl start cups

# 3. è®¿é—®CUPSç®¡ç†ç•Œé¢
# æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:631

# 4. æ·»åŠ æ‰“å°æœº
# - ç‚¹å‡» "Administration"
# - ç‚¹å‡» "Add Printer"
# - é€‰æ‹©ä½ çš„æ‰“å°æœº (HP_DeskJet_4900)
# - é€‰æ‹©é©±åŠ¨ç¨‹åº
# - è®¾ç½®é»˜è®¤é€‰é¡¹

# 5. è®¾ç½®æ‰“å°æœºå…±äº«ï¼ˆå¦‚æœéœ€è¦ï¼‰
# - åœ¨æ‰“å°æœºè®¾ç½®ä¸­å‹¾é€‰ "Share This Printer"
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ‰“å°æœºæ— æ³•è¿æ¥

```bash
# æ£€æŸ¥CUPSæœåŠ¡çŠ¶æ€
sudo systemctl status cups

# æ£€æŸ¥æ‰“å°æœºæ˜¯å¦åœ¨çº¿
lpstat -v

# æ£€æŸ¥æ‰“å°æœºçŠ¶æ€
lpstat -s
```

#### 2. Dockeræƒé™é—®é¢˜

```bash
# å°†ç”¨æˆ·æ·»åŠ åˆ°dockerç»„
sudo usermod -aG docker $USER

# æˆ–è€…ä½¿ç”¨ç‰¹æƒæ¨¡å¼è¿è¡Œ
docker run --privileged ...
```

#### 3. USBè®¾å¤‡æƒé™

```bash
# æ£€æŸ¥USBè®¾å¤‡
lsusb

# æ·»åŠ USBè®¾å¤‡æƒé™è§„åˆ™
sudo nano /etc/udev/rules.d/99-usb-printer.rules

# æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ›¿æ¢VendorIDå’ŒProductIDï¼‰
# SUBSYSTEM=="usb", ATTR{idVendor}=="03f0", ATTR{idProduct}=="7d04", MODE="0666"

# é‡æ–°åŠ è½½è§„åˆ™
sudo udevadm control --reload-rules
sudo udevadm trigger
```

#### 4. æ–‡ä»¶é¢„è§ˆä¸å·¥ä½œ

ç¡®ä¿å·²å®‰è£…é¢„è§ˆä¾èµ–ï¼š

```bash
# PDFé¢„è§ˆéœ€è¦
sudo apt install poppler-utils

# å›¾ç‰‡é¢„è§ˆéœ€è¦ï¼ˆé€šå¸¸å·²å®‰è£…ï¼‰
sudo apt install libjpeg-dev
```

#### 5. Officeæ–‡æ¡£è½¬æ¢

å¯¹äºOfficeæ–‡æ¡£ï¼Œéœ€è¦å®‰è£…LibreOfficeï¼š

```bash
sudo apt install libreoffice-writer libreoffice-calc libreoffice-impress
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# Dockeræ—¥å¿—
docker-compose logs -f

# åº”ç”¨æ—¥å¿—ï¼ˆåœ¨å®¹å™¨å†…ï¼‰
docker exec -it remote-print-service cat /app/logs/app.log
```

### é‡å¯æœåŠ¡

```bash
# Docker
docker-compose restart

# åŸç”Ÿéƒ¨ç½²
# é‡å¯åº”ç”¨è¿›ç¨‹
pkill -f "python run.py"
python run.py &
```

## ğŸ“„ æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

| ç±»å‹ | æ‰©å±•å | é¢„è§ˆ | æ‰“å° |
|------|--------|------|------|
| PDF | .pdf | âœ… | âœ… |
| Word | .doc, .docx | âœ… | âœ… |
| Excel | .xls, .xlsx | âœ… | âœ… |
| PowerPoint | .ppt, .pptx | âœ… | âœ… |
| æ–‡æœ¬ | .txt | âœ… | âœ… |
| å›¾ç‰‡ | .png, .jpg, .jpeg, .gif, .bmp | âœ… | âœ… |
| HTML | .html, .htm | âœ… | âœ… |
| CSV | .csv | âœ… | âœ… |

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ç½‘ç»œéš”ç¦»**: ä»…åœ¨å¯ä¿¡ç½‘ç»œä¸­ä½¿ç”¨
2. **è®¿é—®æ§åˆ¶**: å¦‚éœ€å…¬å¼€è®¿é—®ï¼Œæ·»åŠ è®¤è¯
3. **æ–‡ä»¶æ¸…ç†**: å®šæœŸæ¸…ç†ä¸Šä¼ çš„æ–‡ä»¶
4. **æ—¥å¿—ç›‘æ§**: å¯ç”¨æ—¥å¿—è®°å½•å¹¶å®šæœŸæ£€æŸ¥

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ”§ ARM64 æ¶æ„æ”¯æŒ

æœ¬é¡¹ç›®å®Œå…¨æ”¯æŒ ARM64 (aarch64) æ¶æ„ï¼Œä¸“ä¸ºæ ‘è“æ´¾ã€ARMæœåŠ¡å™¨ç­‰è®¾å¤‡ä¼˜åŒ–ã€‚

### æ”¯æŒçš„æ¶æ„

| æ¶æ„ | æ ‡è¯† | è¯´æ˜ |
|------|------|------|
| AMD64 | `linux/amd64` | æ ‡å‡†x86_64æœåŠ¡å™¨/PC |
| ARM64 | `linux/arm64` | æ ‘è“æ´¾4/5, ARMæœåŠ¡å™¨, NASç­‰ |
| ARMv7 | `linux/arm/v7` | æ ‘è“æ´¾3åŠæ›´æ—©ç‰ˆæœ¬ï¼ˆéœ€è°ƒæ•´é•œåƒï¼‰ |

### è·å– ARM64 é•œåƒ

#### æ–¹å¼ä¸€ï¼šä»é˜¿é‡Œäº‘é•œåƒä»“åº“æ‹‰å–

```bash
# ç™»å½•é˜¿é‡Œäº‘é•œåƒä»“åº“
docker login registry.cn-hangzhou.aliyuncs.com -u å‘½åç©ºé—´@äº‘è´¦å·ID -p å¯†ç 

# æ‹‰å–ARM64é•œåƒ
docker pull registry.cn-hangzhou.aliyuncs.com/å‘½åç©ºé—´/remote-print-service:latest

# è¿è¡Œå®¹å™¨
docker run -d \
  --name remote-print \
  -p 5000:5000 \
  -p 631:631 \
  registry.cn-hangzhou.aliyuncs.com/å‘½åç©ºé—´/remote-print-service:latest
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨ç¦»çº¿ tar åŒ…ï¼ˆæ¨èç”¨äºç¦»çº¿ç¯å¢ƒï¼‰

è¯¦ç»†æ­¥éª¤è¯·å‚è€ƒ [ç¦»çº¿éƒ¨ç½²æ–‡æ¡£](docs/OFFLINE_DEPLOYMENT.md)ã€‚

```bash
# ä¼ è¾“å¹¶åŠ è½½ç¦»çº¿é•œåƒ
scp print-service-arm64.tar user@debian-arm64:/path/
docker load < print-service-arm64.tar

# è¿è¡Œå®¹å™¨
docker run -d \
  --name remote-print \
  -p 5000:5000 \
  -p 631:631 \
  -v /opt/print-service/uploads:/app/uploads \
  print-service:latest
```

---

## ğŸ¤– CI/CD è‡ªåŠ¨åŒ–æ„å»º

æœ¬é¡¹ç›®ä½¿ç”¨ GitHub Actions å®ç°è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ã€‚

### è‡ªåŠ¨åŒ–æµç¨‹

```mermaid
graph TD
    A[ä»£ç æ¨é€] --> B{æ„å»ºæ£€æŸ¥}
    B -->|PR| C[å¤šæ¶æ„æ„å»º]
    B -->|Push to main| C
    B -->|Tag v*| C
    
    C --> D[æ„å»ºAMD64é•œåƒ]
    C --> E[æ„å»ºARM64é•œåƒ]
    
    D --> F[æ¨é€åˆ°é˜¿é‡Œäº‘]
    E --> F
    
    F --> G{æ˜¯Tagæ¨é€?}
    G -->|æ˜¯| H[åˆ›å»ºGitHub Release]
    G -->|å¦| I[ç”Ÿæˆç¦»çº¿taråŒ…]
    
    H --> J[ä¸Šä¼ ç¦»çº¿taråŒ…åˆ°Release]
    I --> K[ä¸Šä¼ åˆ°Actions Artifacts]
```

### è‡ªåŠ¨è§¦å‘æ¡ä»¶

| äº‹ä»¶ | è§¦å‘çš„æ“ä½œ |
|------|-----------|
| æ¨é€åˆ° `main`/`master` åˆ†æ”¯ | æ„å»ºé•œåƒ + æ¨é€åˆ°é˜¿é‡Œäº‘ + ç”Ÿæˆç¦»çº¿tar |
| åˆ›å»º `v*` ç‰ˆæœ¬æ ‡ç­¾ | æ„å»ºé•œåƒ + æ¨é€åˆ°é˜¿é‡Œäº‘ + ç”Ÿæˆç¦»çº¿tar + åˆ›å»ºRelease |
| Pull Request | ä»…æ„å»ºé•œåƒï¼ˆä¸æ¨é€ï¼‰ |

### é…ç½®é˜¿é‡Œäº‘é•œåƒä»“åº“

è¯¦ç»†é…ç½®è¯·å‚è€ƒ [é˜¿é‡Œäº‘é•œåƒæœåŠ¡é…ç½®æ–‡æ¡£](docs/ALIYUN_REGISTRY.md)ã€‚

éœ€è¦åœ¨ GitHub ä»“åº“ä¸­æ·»åŠ ä»¥ä¸‹ Secretsï¼š

| Secret Name | è¯´æ˜ |
|-------------|------|
| `ALIYUN_REGISTRY_USERNAME` | é˜¿é‡Œäº‘é•œåƒä»“åº“ç”¨æˆ·å |
| `ALIYUN_REGISTRY_PASSWORD` | é˜¿é‡Œäº‘é•œåƒä»“åº“å¯†ç  |
| `ALIYUN_REPOSITORY_NAME` | é•œåƒä»“åº“åç§° |

### æ‰‹åŠ¨è§¦å‘æ„å»º

1. è¿›å…¥ GitHub ä»“åº“çš„ **Actions** é¡µé¢
2. é€‰æ‹© **Build and Push Docker Image** å·¥ä½œæµ
3. ç‚¹å‡» **Run workflow**
4. é€‰æ‹©åˆ†æ”¯å¹¶è¿è¡Œ

### æŸ¥çœ‹æ„å»ºçŠ¶æ€

- **GitHub Actions**: https://github.com/ä½ çš„ç”¨æˆ·å/printer_server/actions
- **é˜¿é‡Œäº‘é•œåƒä»“åº“**: https://cr.console.aliyun.com

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹[æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)éƒ¨åˆ†
2. æŸ¥çœ‹é¡¹ç›®Issue
3. æäº¤æ–°çš„Issueæè¿°é—®é¢˜
